---
import Container from "../../components/Container.astro";

import AdSpace from "../../components/tutorials/AdSpace.astro";
import Post from "../../components/resources/Post.astro";
import Pagination from "../../components/elements/Pagination.astro";
import TagList from "../../components/elements/TagList.astro";

import { getCollection } from "astro:content";
const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Container
    title="Blog"
    description="Stream of consciousness and other rants and ramblings"
    image="/banner/blog.png"
>
    <aside class="block" aria-labelledby="sidebar-label">
        <div class="xl:w-[336px]">
            <h3 id="sidebar-label" class="sr-only">Sidebar</h3>

            <TagList title="Tags" tags={["Hardware", "Musing", "Setup"]} />

            <AdSpace />
        </div>
    </aside>

    <article
        class="xl:w-[828px] w-full max-w-none format format-sm sm:format-base lg:format-lg format-blue dark:format-invert"
    >
        {
            posts.map(
                (post, index) =>
                    index < 10 && (
                        <Post
                            title={post.data.title}
                            description={post.data.description}
                            date={post.data.pubDate}
                            image={post.data.heroImage}
                            url={`/blog/${post.slug}/`}
                            source={null}
                        />
                    )
            )
        }

        <Pagination />
    </article>
</Container>
