---
import BaseHead from "../../components/BaseHead.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import BlogCard from "../../components/elements/BlogCard.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Navbar />
		<main>
			<section class="py-5 text-center container">
				<div class="row py-lg-5">
					<div class="col-lg-6 col-md-8 mx-auto">
						<h1 class="fw-light">Blog Posts</h1>
						<p class="lead text-body-secondary">
							Blog posts are a stream of consciousness, where I'm taking notes on something
							as I'm working through it. Or making random notes about something on my mind.
							There's not much here other than the rantings of a mad man.
						</p>
						<p>
							<a href="#" class="btn btn-primary my-2"
								>Cool story bruh</a
							>
							<a href="#" class="btn btn-secondary my-2"
								>What?</a
							>
						</p>
					</div>
				</div>
			</section>

			<section>
				<div class="album py-5 bg-body-tertiary">
					<div class="container">
						<div
							class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"
						>
							{
								posts.map((post) => (
									<a href={`/blog/${post.slug}/`}>
										<BlogCard
											title={post.data.title}
											description={post.data.description}
											date={post.data.pubDate}
											image={post.data.heroImage}
										/>
									</a>
								))
							}
						</div>
					</div>
				</div>
			</section>
		</main>

		<Footer />
	</body>
</html>
