---
import Container from "../../components/Container.astro";
import Post from "../../components/resources/Post.astro";
import AdSpace from "../../components/tutorials/AdSpace.astro";
import TagList from "../../components/elements/TagList.astro";
import type { PostType } from "../../consts";

import { getCollection } from "astro:content";
const posts = (await getCollection("resources")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Container
    title="Resources"
    description="Resources are effectively bookmarks for my own projects or projects I want to highlight"
    image="/banner/resources.png"
>
    <aside class="block" aria-labelledby="sidebar-label">
        <div class="xl:w-[336px]">
            <h3 id="sidebar-label" class="sr-only">Sidebar</h3>
            <TagList title="Filter" tags={["Tool", "Fan Project", "Assets"]} />
            <AdSpace />
        </div>
    </aside>

    <article
        class="xl:w-[828px] w-full max-w-none format format-sm sm:format-base lg:format-lg format-blue dark:format-invert"
    >
        {
            posts.map(
                (post, index) =>
                    index < 10 && (
                        <Post
                            title={post.data.title}
                            description={post.data.description}
                            date={post.data.pubDate}
                            image={post.data.heroImage}
                            url={`/resources/${post.slug}`}
                            artistName={post.data.artistName}
                            artistLink={post.data.artistLink}
                            download={post.data.download}
                            type={post.data.tag as PostType}
                        />
                    )
            )
        }
    </article>
</Container>
